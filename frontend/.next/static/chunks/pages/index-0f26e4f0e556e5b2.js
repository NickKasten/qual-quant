(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(8697)}])},8697:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(5893),r=s(9008),i=s.n(r),n=s(7294),l=s(1438);function d(){var e;let[t,s]=(0,n.useState)(null),[r,i]=(0,n.useState)(!0),[d,c]=(0,n.useState)(null);(0,n.useEffect)(()=>{o()},[]);let o=async()=>{try{i(!0);let e=await l.Z.getPortfolio();s(e),c(null)}catch(e){c(e.message)}finally{i(!1)}},x=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return r?(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]})]})})}):d?(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsxs)("div",{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100 text-red-600",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"We ran into a connection issue"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"The dashboard couldn’t reach the trading API. Verify the backend is healthy and that this deployment has the correct API credentials."}),(0,a.jsxs)("div",{className:"mt-4 flex justify-center space-x-3 text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"• Confirm Render API service status"}),(0,a.jsx)("span",{children:"• Check `API_BASE_URL` and `API_KEY` env vars"})]}),(0,a.jsx)("button",{onClick:o,className:"mt-6 inline-flex items-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700",children:"Try again"}),(0,a.jsx)("p",{className:"mt-3 overflow-hidden text-ellipsis whitespace-pre-line break-all rounded bg-red-50 px-3 py-2 text-left text-xs text-red-600",children:d})]})}):(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Portfolio Summary"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Data delayed ",(null==t?void 0:t.data_delay_minutes)||15," minutes"]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Current Equity"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-semibold text-gray-900",children:x((null==t?void 0:t.current_equity)||0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Total P/L"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-semibold ".concat(((null==t?void 0:t.total_pl)||0)>=0?"text-green-600":"text-red-600"),children:x((null==t?void 0:t.total_pl)||0)}),(0,a.jsx)("dd",{className:"text-sm ".concat(((null==t?void 0:t.total_pl)||0)>=0?"text-green-600":"text-red-600"),children:(e=>{let s=(null==t?void 0:t.current_equity)||0;if(!s)return"0.00%";let a=e/s*100;return"".concat(a>=0?"+":"").concat(a.toFixed(2),"%")})((null==t?void 0:t.total_pl)||0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Open Positions"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-semibold text-gray-900",children:(null==t?void 0:null===(e=t.positions)||void 0===e?void 0:e.length)||0})]})]})}),(null==t?void 0:t.positions)&&t.positions.length>0&&(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-4",children:"Current Positions"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Symbol"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Market Value"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unrealized P/L"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.positions.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.symbol}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.quantity}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x(e.avg_price||0)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x(e.current_price||0)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x(e.market_value||0)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm ".concat((e.unrealized_pl||0)>=0?"text-green-600":"text-red-600"),children:x(e.unrealized_pl||0)})]},t))})]})})]}),(0,a.jsxs)("div",{className:"mt-4 text-xs text-gray-400",children:["Last updated: ",(null==t?void 0:t.timestamp)?new Date(t.timestamp).toLocaleString():"N/A"]})]})})}var c=s(9009),o=s(7180),x=s(4195),m=s(3023),h=s(5358),u=s(6050),p=s(3558),g=s(6880);function y(){var e;let[t,s]=(0,n.useState)(null),[r,i]=(0,n.useState)(!0),[d,y]=(0,n.useState)(null),[f,j]=(0,n.useState)(30);(0,n.useEffect)(()=>{v()},[f]);let v=async()=>{try{i(!0);let e=await l.Z.getPerformance(f);s(e),y(null)}catch(e){y(e.message)}finally{i(!1)}},N=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);if(r)return(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-4"}),(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})})});if(d)return(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsxs)("div",{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100 text-red-600",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Unable to load performance data"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"We couldn’t retrieve the equity curve. Ensure the backend has `equity` records and that the service is reachable from this deployment."}),(0,a.jsxs)("div",{className:"mt-4 flex justify-center space-x-3 text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"• Confirm Supabase credentials"}),(0,a.jsx)("span",{children:"• Check Render API logs"})]}),(0,a.jsx)("button",{onClick:v,className:"mt-6 inline-flex items-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700",children:"Try again"}),(0,a.jsx)("p",{className:"mt-3 overflow-hidden text-ellipsis whitespace-pre-line break-all rounded bg-red-50 px-3 py-2 text-left text-xs text-red-600",children:d})]})});let w=0===(e=(null==t?void 0:t.equity_curve)||[]).length?[]:e.map(e=>({date:new Date(e.timestamp).toLocaleDateString(),equity:parseFloat(e.equity),timestamp:e.timestamp}));return(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Performance Chart"}),(0,a.jsx)("div",{className:"flex space-x-2",children:[{value:7,label:"7D"},{value:30,label:"30D"},{value:90,label:"90D"},{value:365,label:"1Y"}].map(e=>(0,a.jsx)("button",{onClick:()=>j(e.value),className:"px-3 py-1 text-sm rounded ".concat(f===e.value?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]}),(null==t?void 0:t.metrics)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Initial Equity"}),(0,a.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900",children:N(t.metrics.initial_equity)})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Final Equity"}),(0,a.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900",children:N(t.metrics.final_equity)})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Total Return"}),(0,a.jsxs)("dd",{className:"mt-1 text-lg font-semibold ".concat(t.metrics.total_return_percent>=0?"text-green-600":"text-red-600"),children:[t.metrics.total_return_percent>=0?"+":"",t.metrics.total_return_percent.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Period"}),(0,a.jsxs)("dd",{className:"mt-1 text-lg font-semibold text-gray-900",children:[t.metrics.period_days," days"]})]})]}),(0,a.jsx)("div",{className:"h-64",children:w.length>0?(0,a.jsx)(c.h,{width:"100%",height:"100%",children:(0,a.jsxs)(o.w,{data:w,children:[(0,a.jsx)(x.q,{strokeDasharray:"3 3"}),(0,a.jsx)(m.K,{dataKey:"date",tick:{fontSize:12},interval:"preserveStartEnd"}),(0,a.jsx)(h.B,{tick:{fontSize:12},tickFormatter:e=>"$".concat((e/1e3).toFixed(0),"K")}),(0,a.jsx)(u.u,{formatter:e=>[N(e),"Equity"],labelFormatter:e=>"Date: ".concat(e)}),(0,a.jsx)(p.D,{}),(0,a.jsx)(g.x,{type:"monotone",dataKey:"equity",stroke:"#2563eb",strokeWidth:2,name:"Portfolio Equity",dot:!1})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No performance data available for the selected period"})}),(0,a.jsxs)("div",{className:"mt-4 text-xs text-gray-400",children:["Data delayed ",(null==t?void 0:t.data_delay_minutes)||15," minutes"]})]})})}function f(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"QualQuant - AI Bot Dashboard"}),(0,a.jsx)("meta",{name:"description",content:"Live AI trading bot dashboard showing portfolio performance, trades, and signals"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Trading Dashboard"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Real-time view of your AI trading bot's performance and portfolio"})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(d,{}),(0,a.jsx)(y,{})]})]})]})}},1438:function(e,t){"use strict";class s{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.baseURL||"",a="".concat(s).concat(e),r={headers:{"Content-Type":"application/json",...t.headers||{}},...t};try{let t=await fetch(a,r);if(!t.ok){if(404===t.status)throw Error("API endpoint not found: ".concat(e));if(401===t.status)throw Error("Authentication failed - check API key in environment variables");if(403===t.status)throw Error("Access forbidden - invalid API key or insufficient permissions");if(t.status>=500)throw Error("Backend server error - please try again later");throw Error("HTTP error! status: ".concat(t.status))}return await t.json()}catch(t){if("TypeError"===t.name&&t.message.includes("fetch"))throw Error("Cannot connect to backend - check if API server is running");throw console.error("API request failed: ".concat(e),t),t}}async getPortfolio(){return this.request("/api/proxy/portfolio")}async getTrades(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=new URLSearchParams({page:e.toString(),page_size:t.toString()});return s&&a.append("symbol",s),this.request("/api/proxy/trades?".concat(a))}async getPerformance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return this.request("/api/proxy/performance?days=".concat(e))}async getSignals(){return this.request("/api/proxy/signals")}async getStatus(){return this.request("/api/proxy/status")}constructor(){this.baseURL="".replace(/\/$/,"")}}t.Z=new s}},function(e){e.O(0,[449,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8556:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trades",function(){return s(1918)}])},1918:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(5893),a=s(9008),n=s.n(a),i=s(7294),d=s(1438);function l(){let[e,t]=(0,i.useState)([]),[s,a]=(0,i.useState)(null),[n,l]=(0,i.useState)(!0),[c,o]=(0,i.useState)(null),[x,m]=(0,i.useState)(1),[p,h]=(0,i.useState)("");(0,i.useEffect)(()=>{u()},[x,p]);let u=async()=>{try{l(!0);let e=await d.Z.getTrades(x,20,p||null);t(e.trades||[]),a(e.pagination),o(null)}catch(e){o(e.message)}finally{l(!1)}},g=e=>null==e||isNaN(e)?"$---.--":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),y=e=>{if(!e)return"Unknown time";try{return new Date(e).toLocaleString()}catch(e){return"Invalid date"}},f=e=>null==e||isNaN(e)?0:Number(e),b=e=>{let t=(null==e?void 0:e.toLowerCase())==="buy"?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return"".concat("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"," ").concat(t)},N=e=>{m(e)};return n?(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),(0,r.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)("div",{className:"grid grid-cols-6 gap-4",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]},t))})]})})}):c?(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsxs)("div",{className:"p-6 text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100 text-red-600",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"We couldn’t load trade history"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"The API call for trades failed. Check the backend service and Supabase credentials, then try again."}),(0,r.jsxs)("div",{className:"mt-4 flex justify-center space-x-3 text-xs text-gray-500",children:[(0,r.jsx)("span",{children:"• Confirm API connectivity"}),(0,r.jsx)("span",{children:"• Verify Supabase service-role key"})]}),(0,r.jsx)("button",{onClick:u,className:"mt-6 inline-flex items-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700",children:"Try again"}),(0,r.jsx)("p",{className:"mt-3 overflow-hidden text-ellipsis whitespace-pre-line break-all rounded bg-red-50 px-3 py-2 text-left text-xs text-red-600",children:c})]})}):(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Trade Feed"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Filter by symbol",value:p,onChange:e=>{h(e.target.value),m(1)},className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[(null==s?void 0:s.total_count)||0," total trades"]})]})]}),e.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Symbol"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Side"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fill Price"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Value"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e,t)=>{var s;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y(e.timestamp)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.symbol||"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:b(e.side),children:(null===(s=e.side)||void 0===s?void 0:s.toUpperCase())||"UNKNOWN"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f(e.quantity)||"--"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(e.fill_price||e.price)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(f(e.quantity)*f(e.fill_price||e.price))})]},e.id||t)})})]})}),s&&s.total_pages>1&&(0,r.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing page ",s.page," of ",s.total_pages,"(",s.total_count," total trades)"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>N(x-1),disabled:x<=1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),Array.from({length:Math.min(5,s.total_pages)},(e,t)=>{let s=t+1;return(0,r.jsx)("button",{onClick:()=>N(s),className:"px-3 py-1 text-sm border rounded-md ".concat(x===s?"bg-primary-600 text-white border-primary-600":"border-gray-300 hover:bg-gray-50"),children:s},s)}),(0,r.jsx)("button",{onClick:()=>N(x+1),disabled:x>=s.total_pages,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]}):(0,r.jsx)("div",{className:"text-center py-12 text-sm text-gray-600",children:p?"No trades have been recorded for ".concat(p.toUpperCase()," yet."):"No trades have been recorded yet. New executions will appear here as soon as the bot places an order."})]})})}function c(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n(),{children:[(0,r.jsx)("title",{children:"Trade History - QualQuant"}),(0,r.jsx)("meta",{name:"description",content:"Complete trading history and transaction log from the AI trading bot"})]}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Trade History"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Complete log of all trades executed by the AI bot"})]}),(0,r.jsx)(l,{})]})]})}},1438:function(e,t){"use strict";class s{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.baseURL||"",r="".concat(s).concat(e),a={headers:{"Content-Type":"application/json",...t.headers||{}},...t};try{let t=await fetch(r,a);if(!t.ok){if(404===t.status)throw Error("API endpoint not found: ".concat(e));if(401===t.status)throw Error("Authentication failed - check API key in environment variables");if(403===t.status)throw Error("Access forbidden - invalid API key or insufficient permissions");if(t.status>=500)throw Error("Backend server error - please try again later");throw Error("HTTP error! status: ".concat(t.status))}return await t.json()}catch(t){if("TypeError"===t.name&&t.message.includes("fetch"))throw Error("Cannot connect to backend - check if API server is running");throw console.error("API request failed: ".concat(e),t),t}}async getPortfolio(){return this.request("/api/proxy/portfolio")}async getTrades(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new URLSearchParams({page:e.toString(),page_size:t.toString()});return s&&r.append("symbol",s),this.request("/api/proxy/trades?".concat(r))}async getPerformance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return this.request("/api/proxy/performance?days=".concat(e))}async getSignals(){return this.request("/api/proxy/signals")}async getStatus(){return this.request("/api/proxy/status")}constructor(){this.baseURL="".replace(/\/$/,"")}}t.Z=new s},9008:function(e,t,s){e.exports=s(4764)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8556)}),_N_E=e.O()}]);